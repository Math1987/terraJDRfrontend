<div class="row">
  <div class="col-md-7 row h-auto d-inline-block">
    <mat-card class="col-12">
      <mat-card-title><span>Carte</span></mat-card-title>
        <mat-card-content class="row">
          <canvas id="worldViewGame"></canvas>
        </mat-card-content>
    </mat-card>
    <br>
    <app-message></app-message>
  </div>
  <div class="col-md-5 row">
    <div class="container-fluid">

      <app-resources></app-resources>
      <br>
      <mat-card class="interactions">

        <mat-card-title><span>interactions</span></mat-card-title>

        <div class="row interactionsContent">

          <div *ngIf="caseFocused && caseFocused.draw()" class="col-4 row flex-column text-center focusedCase w-100 caseColor">

            <canvas id="{{caseFocused.id}}" class="canvasInteraction canvasCase" ></canvas>

            <h3>{{caseFocused.title()}}</h3>
            <p>Coordonnées {{caseFocused.getPosition().x}}/{{caseFocused.getPosition().y}}</p>
            <p>Coût déplacement {{getMoveCost(caseFocused.target.x,caseFocused.target.y)}}</p>
            <div *ngFor="let action of caseFocused.actions">
              <div class="btn midleBlueColor" (click)="useInteraction(caseFocused, action)">{{action.getNom(caseFocused.user, caseFocused.target)}}</div>
            </div>

          </div>
          <div class="col-8 row">

            <div *ngFor="let interaction of interactionObjs" class="col-6">

              <div *ngIf="interaction.draw()"
                   class="text-center teamColor">
                <div [ngClass]="{
                     'text-center': true,
                     'neutralColor': interaction.getTypeOfInteractionWith(getCharacter()) == 'neutral',
                     'teamColor': interaction.getTypeOfInteractionWith(getCharacter()) == 'ally',
                     'enemyColor': interaction.getTypeOfInteractionWith(getCharacter()) == 'enemy'
                 }"
                >
                  <canvas id="{{interaction.id}}"
                          [ngClass]="{
                     'canvasInteraction': true,
                     'neutralCanvas': interaction.getTypeOfInteractionWith(getCharacter()) == 'neutral',
                     'allyCanvas': interaction.getTypeOfInteractionWith(getCharacter()) == 'ally',
                     'ennemyCanvas': interaction.getTypeOfInteractionWith(getCharacter()) == 'enemy'
                 }"
                  ></canvas>
                  <h5>{{interaction.title()}}</h5>
                  <p *ngIf="interaction.target.life">{{interaction.target.life}}/{{interaction.target.life_max}}pv</p>
                  <div class="row flex-column">
                    <div *ngFor="let action of interaction.actions">
                      <div class="btn midleBlueColor" (click)="useInteraction(interaction, action)">{{action.getNom(interaction.user, interaction.target)}}</div>
                    </div>
                  </div>
                </div>
              </div>

            </div>


          </div>

        </div>
      </mat-card>


    </div>


  </div>

</div>



